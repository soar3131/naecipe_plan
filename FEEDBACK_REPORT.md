# 내시피(Naecipe) 문서 종합 피드백 보고서

**작성일**: 2025.11.30
**검토 대상**: 1-1SERVICE_PLAN.md ~ 5-1-9_ADR.md (전체 15개 문서)
**검토 방식**: 5차 반복 심층 분석

---

## Executive Summary

내시피 프로젝트 문서는 **전반적으로 높은 완성도**를 보이며, 기획부터 아키텍처 설계까지 체계적으로 구성되어 있습니다. 특히 Core Loop 개념을 중심으로 한 서비스 설계와 Recipe Crawler Pipeline의 통합이 잘 이루어져 있습니다.

### 종합 평가

| 영역 | 점수 | 평가 |
|------|------|------|
| **문서 구조** | 9/10 | 매우 우수 |
| **기술적 정확성** | 8/10 | 우수 |
| **일관성** | 8/10 | 우수 |
| **실행 가능성** | 7/10 | 양호 |
| **완성도** | 9/10 | 매우 우수 |

**총점: 44/50 (88%)** ✅ *3-2 문서 작성 완료 후 상향*

---

## 1차 검토: 전체 문서 구조 및 완성도 분석

### 1.1 문서 체계 평가

#### 강점

1. **명확한 문서 계층 구조**
   - 기획(1-x) → 요구사항(2-x) → UX(3-x) → 아키텍처(5-x)로 체계적 구성
   - 각 문서가 독립적으로 참조 가능하면서도 상호 연결

2. **일관된 문서 포맷**
   - 모든 문서가 마크다운 + Mermaid 다이어그램 활용
   - 변경 이력 관리 포함

3. **대상 독자 명시**
   - 5-1SERVICE_ARCHITECTURE.md의 팀별 필수 문서 가이드 우수

#### 문제점

| 문제 | 심각도 | 위치 | 상태 |
|------|--------|------|------|
| ~~3-2USER_SCENARIO.md 비어있음~~ | ~~🔴 Critical~~ | 3-2USER_SCENARIO.md | ✅ **해결됨** |
| 4-x 번대 문서 누락 | 🟡 Medium | 문서 체계 | 미해결 |
| PRD.md 파일명 번호 체계 불일치 | 🟢 Low | PRD.md | 미해결 |

### 1.2 문서별 완성도

| 문서 | 완성도 | 비고 |
|------|--------|------|
| 1-1SERVICE_PLAN.md | 95% | 우수 |
| 1-2BUSINESS_PLAN.md | 90% | 우수 |
| PRD.md | 90% | 우수 |
| 2-1REQUIREMENT.md | 85% | 양호 |
| 2-2FEATURE_SPEC.md | 90% | 우수 |
| 3-1IA_MENU_STRUCTURE.md | 85% | 양호 |
| 3-2USER_SCENARIO.md | 90% | ✅ **작성 완료** - 우수 |
| 3-3WIREFRAME.md | 85% | 양호 |
| 5-1SERVICE_ARCHITECTURE.md | 95% | 우수 |
| 5-1-1_DOMAIN.md | 90% | 우수 |
| 5-1-2_SYSTEM.md | 95% | 우수 |
| 5-1-3_AI_AGENT.md | 95% | 우수 |
| 5-1-4_API.md | 90% | 우수 |
| 5-1-5_FRONTEND.md | 90% | 우수 |
| 5-1-6_INFRA.md | 90% | 우수 |
| 5-1-7_SECURITY.md | 90% | 우수 |
| 5-1-8_OPERATIONS.md | 90% | 우수 |
| 5-1-9_ADR.md | 95% | 우수 |

---

## 2차 검토: 기술적 정확성 및 일관성 분석

### 2.1 기술 스택 일관성

#### 확인된 사항 (✅ 일관성 유지)

| 영역 | 기술 | 일관성 |
|------|------|--------|
| 백엔드 | FastAPI (Python) | ✅ 전 문서 일관 |
| 프론트엔드 | Next.js 14 (App Router) | ✅ 전 문서 일관 |
| 데이터베이스 | PostgreSQL | ✅ 전 문서 일관 |
| 캐시 | Redis Cluster | ✅ 전 문서 일관 |
| 메시징 | Apache Kafka (MSK) | ✅ 전 문서 일관 |
| AI 프레임워크 | LangGraph + OpenAI/Anthropic | ✅ 전 문서 일관 |
| 인프라 | AWS EKS | ✅ 전 문서 일관 |
| CI/CD | GitHub Actions + ArgoCD | ✅ 전 문서 일관 |

### 2.2 기술적 정확성 검증

#### 강점

1. **DB 스키마 설계 우수**
   - 5-1-2_SYSTEM.md의 SQL 스키마가 실제 구현 가능한 수준
   - 인덱스 전략이 구체적으로 명시됨
   - recipe_sources, recipe_score_history 테이블 설계 적절

2. **API 설계 표준 준수**
   - RESTful 원칙 준수
   - RFC 7807 에러 형식 채택
   - Cursor 기반 페이지네이션 적용

3. **AI Agent 구현 코드 구체적**
   - LangGraph StateGraph 사용법 정확
   - Pydantic BaseModel 활용 적절
   - Fallback LLM 전략 포함

#### 우려 사항

| 항목 | 문제점 | 권장 수정 |
|------|--------|----------|
| **gRPC 포트 명시** | Deployment YAML에서 포트 50051 명시되나 모든 서비스에 적용 필요 | 서비스별 gRPC 포트 명세 추가 |
| **타임존 처리** | TIMESTAMPTZ 사용하나 애플리케이션 레벨 처리 미언급 | UTC 표준화 정책 명시 |
| **벡터 검색 성능** | IVFFlat 인덱스 사용, lists=100은 데이터 규모에 따라 조정 필요 | 데이터 규모별 인덱스 파라미터 가이드 추가 |
| **Kafka 토픽 설계** | 파티션 수 명시되나 리텐션 정책 상세 부족 | retention.ms, cleanup.policy 설정 추가 |

### 2.3 코드 예시 검증

#### Python 코드 (5-1-3_AI_AGENT.md)

```python
# 검증 결과: 구문 정확, 실행 가능
# 개선 권장사항:
# 1. async def 메서드에 타입 힌트 완전히 적용
# 2. error handling 더 구체화
# 3. logging 추가 필요
```

#### TypeScript 코드 (5-1-5_FRONTEND.md)

```typescript
// 검증 결과: 구문 정확, Next.js 14 App Router 패턴 준수
// 개선 권장사항:
// 1. Server Actions 활용 고려
// 2. Suspense 경계 추가 권장
```

---

## 3차 검토: 누락 사항 및 개선점 분석

### 3.1 Critical 누락 사항

#### ✅ ~~1. 3-2USER_SCENARIO.md 미작성~~ → **해결됨**

**상태**: ✅ 작성 완료
**평가**: 우수 (90%)

**작성된 내용 요약**:
- 3개 핵심 페르소나 정의 (집밥러, 크리에이터, 파워유저)
- 4개 핵심 시나리오 (SC-01~04) + Phase 2 참고 시나리오
- 6개 Epic 기반 21개 User Story (US-SEARCH, US-DETAIL, US-BOOK, US-ADJ, US-QNA, US-AUTH)
- As a / I want / So that 구조의 표준 포맷 적용
- Phase 1 Must/Should 우선순위 명시

**강점**:
- Core Loop 완주 시나리오(SC-01)가 상세하게 기술됨
- 예외 흐름(에러, 한도 초과)까지 고려
- 성공 조건이 측정 가능한 형태로 명시
- 디자인/개발/QA/데이터팀 활용 방법 가이드 포함

**개선 권장**:
- Acceptance Criteria 테이블 별도 분리 권장
- 화면별 시퀀스 다이어그램 추가 가능

---

#### 🟡 2. 모바일 앱 아키텍처 누락 (유지)

**영향도**: Medium-High
**설명**: 시스템 아키텍처에 React Native App 언급되나 상세 문서 없음

**필요 내용**:
- React Native 앱 아키텍처
- 네이티브 기능 연동 (푸시 알림, 카메라 등)
- 오프라인 지원 전략

### 3.2 Medium 누락 사항

| 항목 | 현재 상태 | 필요 내용 |
|------|----------|----------|
| **로그인 플로우 상세** | 시퀀스 다이어그램만 | 에러 처리, 토큰 갱신 상세 |
| **데이터 백업/복구 절차** | DR 문서에 개요만 | 구체적 복구 스크립트/절차서 |
| **A/B 테스트 프레임워크** | Analytics에 언급만 | 구현 가이드 |
| **국제화(i18n)** | 전혀 언급 없음 | 다국어 지원 전략 |
| **접근성(a11y)** | 전혀 언급 없음 | WCAG 가이드라인 준수 계획 |
| **GDPR/개인정보 처리** | 간략히 언급 | 상세 컴플라이언스 가이드 |

### 3.3 개선 권장 사항

#### 문서 구조 개선

1. **4번대 문서 추가 권장**
   - 4-1 기술 선택 검토서 (PoC 결과)
   - 4-2 성능 벤치마크 결과
   - 4-3 보안 감사 체크리스트

2. **문서 간 참조 링크 보강**
   - 현재: 일부 문서에만 상/하위 문서 링크
   - 개선: 모든 문서에 관련 문서 링크 섹션 추가

3. **용어집(Glossary) 추가**
   - Core Loop, Cookbook Recipe, Adjustment 등 도메인 용어 정의

#### 기술 문서 개선

1. **에러 코드 카탈로그**
   - API 에러 응답의 code 필드 표준화
   - 프론트엔드 에러 핸들링 가이드와 연계

2. **환경 변수 문서화**
   - 현재: docker-compose.yaml에 일부 명시
   - 개선: 전체 환경 변수 목록 및 설명 문서화

3. **데이터베이스 마이그레이션 히스토리**
   - Alembic 마이그레이션 네이밍 컨벤션
   - 롤백 절차 상세화

---

## 4차 검토: 실행 가능성 및 리스크 분석

### 4.1 실행 가능성 평가

#### 강점

| 영역 | 평가 | 근거 |
|------|------|------|
| **인프라 구축** | 실행 가능 | Terraform/K8s 매니페스트 예시 충분 |
| **백엔드 개발** | 실행 가능 | FastAPI 코드 예시 구체적 |
| **프론트엔드 개발** | 실행 가능 | Next.js 14 코드 예시 구체적 |
| **AI 에이전트** | 실행 가능 | LangGraph 구현 코드 제공 |
| **크롤러 개발** | 실행 가능 | Crawler Agent 상세 구현 제공 |

#### 우려 영역

| 영역 | 리스크 | 완화 방안 |
|------|--------|----------|
| **MVP 범위** | Phase 1 범위가 넓음 | 핵심 Core Loop만 우선 구현 |
| **팀 규모** | 문서에 팀 규모 미언급 | 최소 팀 규모 산정 필요 |
| **일정** | 타임라인 미명시 | 마일스톤 정의 필요 |
| **예산** | 월 ~$4,000 + LLM 비용 | 초기 비용 최적화 전략 |

### 4.2 기술 리스크 분석

#### High Risk

| 리스크 | 영향 | 발생 가능성 | 완화 전략 |
|--------|------|------------|----------|
| **LLM API 의존성** | 서비스 중단 | Medium | Fallback 모델 + 로컬 모델 검토 |
| **크롤링 차단** | 데이터 수집 불가 | Medium | 다중 플랫폼 + 존중하는 크롤링 |
| **저작권 이슈** | 법적 문제 | Medium | 출처 명시 + 삭제 요청 대응 체계 |

#### Medium Risk

| 리스크 | 영향 | 발생 가능성 | 완화 전략 |
|--------|------|------------|----------|
| **벡터 검색 성능** | 응답 지연 | Low-Medium | pgvector → 전용 벡터 DB 마이그레이션 옵션 |
| **Kafka 운영 복잡성** | 운영 부담 | Medium | MSK 관리형 서비스 활용 |
| **K8s 학습 곡선** | 개발 지연 | Medium | 팀 교육 + GitOps 표준화 |

### 4.3 비즈니스 리스크 분석

| 리스크 | 설명 | 완화 전략 |
|--------|------|----------|
| **MAU 목표 미달성** | Phase 1: 100,000 MAU 목표 | 마케팅 전략 병행, 바이럴 요소 강화 |
| **수익화 시점** | Phase 2부터 프리미엄 요금제 | 초기 사용자 데이터 기반 요금제 설계 |
| **경쟁사 대응** | 만개의레시피, 쿡앤쉐어 등 | AI 개인화 차별화 집중 |

### 4.4 운영 리스크 분석

| 리스크 | 영향 | 완화 전략 |
|--------|------|----------|
| **온콜 부담** | 팀 번아웃 | 자동화 강화, Runbook 정비 |
| **데이터 손실** | 사용자 신뢰 저하 | Multi-AZ + Cross-Region 백업 |
| **보안 사고** | 서비스 중단, 법적 문제 | OWASP Top 10 대응, 정기 감사 |

---

## 5차 검토: 종합 평가 및 최종 권고사항

### 5.1 문서 품질 종합 평가

#### 우수 사항 (Best Practices)

1. **Core Loop 중심 설계**
   - 모든 문서가 Core Loop를 중심으로 일관되게 설계됨
   - 사용자 가치 제안이 명확

2. **다이어그램 활용**
   - Mermaid 다이어그램으로 복잡한 구조 시각화 우수
   - flowchart, sequenceDiagram, erDiagram 적절히 활용

3. **코드 예시 품질**
   - 실제 구현 가능한 수준의 코드 제공
   - Python, TypeScript, SQL, YAML 등 다양한 언어 커버

4. **아키텍처 결정 기록(ADR)**
   - 9개의 ADR로 주요 결정 사항 문서화
   - 대안 비교 및 선택 근거 명확

5. **Recipe Crawler Pipeline 통합**
   - v1.1에서 추가된 크롤링 파이프라인이 전체 문서에 일관되게 반영됨

#### 개선 필요 사항

1. **누락 문서 작성**
   - 3-2USER_SCENARIO.md (Critical)
   - 모바일 앱 아키텍처 (Medium)

2. **비기능 요구사항 보강**
   - 접근성(a11y)
   - 국제화(i18n)
   - 개인정보 처리 상세

3. **운영 문서 보강**
   - 상세 Runbook
   - 장애 대응 플레이북
   - 용량 계획 가이드

### 5.2 우선순위별 액션 아이템

#### 🔴 즉시 조치 (1주 내)

| # | 항목 | 담당 | 산출물 | 상태 |
|---|------|------|--------|------|
| ~~1~~ | ~~3-2USER_SCENARIO.md 작성~~ | ~~PM/기획~~ | ~~사용자 시나리오 문서~~ | ✅ **완료** |
| 2 | 환경 변수 목록 문서화 | DevOps | .env.example 및 설명 문서 | 대기 |
| 3 | 에러 코드 카탈로그 작성 | Backend | 에러 코드 표준 문서 | 대기 |

#### 🟡 단기 조치 (2-4주 내)

| # | 항목 | 담당 | 산출물 |
|---|------|------|--------|
| 4 | 모바일 앱 아키텍처 문서 | Mobile/Frontend | 5-1-5-1_MOBILE.md |
| 5 | 용어집(Glossary) 작성 | Tech Lead | GLOSSARY.md |
| 6 | 데이터 마이그레이션 가이드 | DBA | 마이그레이션 SOP |
| 7 | 상세 Runbook 작성 | SRE | 서비스별 Runbook |

#### 🟢 중기 조치 (1-2개월 내)

| # | 항목 | 담당 | 산출물 |
|---|------|------|--------|
| 8 | 접근성(a11y) 가이드 | Frontend | a11y 체크리스트 |
| 9 | 국제화(i18n) 전략 | Frontend | i18n 아키텍처 문서 |
| 10 | GDPR 컴플라이언스 가이드 | Security | 개인정보 처리 SOP |
| 11 | 성능 벤치마크 문서 | Backend/SRE | 성능 테스트 결과서 |
| 12 | PoC 결과 문서 | Tech Lead | 기술 선택 검증서 |

### 5.3 문서 유지보수 권고사항

1. **버전 관리 강화**
   - 현재: 문서 내 변경 이력 테이블
   - 권장: Git 태그 + 릴리즈 노트 연동

2. **리뷰 프로세스 도입**
   - 아키텍처 변경 시 ADR 추가 의무화
   - 분기별 문서 정합성 검토

3. **자동화된 문서 검증**
   - Mermaid 다이어그램 렌더링 검증
   - 문서 간 링크 유효성 검사
   - 코드 예시 린팅

### 5.4 최종 권고사항

#### 프로젝트 진행 권고

**결론: 개발 착수 권고 ✅**

~~현재 문서 수준은 개발 착수에 충분하나, 다음 조건 충족 권장:~~
~~1. **3-2USER_SCENARIO.md 작성 완료** (Critical)~~ ✅ **해결됨**

모든 Critical 문서가 완성되어 **개발 착수 가능 상태**입니다.

**남은 권장 사항**:
1. **MVP 범위 재확인** (Phase 1 스코프가 넓을 수 있음)
2. **팀 구성 및 일정 계획 수립**
3. 환경 변수/에러 코드 문서화 (개발 초기 병행 가능)

#### 개발 우선순위 권고

```
1단계: 인프라 셋업 + 인증/사용자 서비스
       ↓
2단계: Recipe 서비스 (검색, 상세)
       ↓
3단계: Cookbook 서비스 (저장, 조리 모드)
       ↓
4단계: Recipe Crawler + Ingestion 서비스
       ↓
5단계: AI Agent 서비스 (피드백, 보정)
       ↓
6단계: 프론트엔드 통합 + QA
```

#### 기술 부채 관리

- ADR 작성을 지속하여 결정 사항 추적
- 초기 MVP에서 발생하는 기술 부채 목록화
- 리팩토링 스프린트 주기적 배치

---

## 부록: 검토 체크리스트

### A. 문서 완성도 체크리스트

- [x] 서비스 기획서 (1-1, 1-2)
- [x] PRD
- [x] 요구사항 정의서 (2-1)
- [x] 기능 명세서 (2-2)
- [x] IA/메뉴 구조 (3-1)
- [x] **사용자 시나리오 (3-2)** ✅ 작성 완료
- [x] 와이어프레임 (3-3)
- [x] 아키텍처 문서 (5-1 시리즈)
- [x] ADR (5-1-9)

### B. 기술 스택 체크리스트

- [x] Backend: FastAPI
- [x] Frontend: Next.js 14
- [x] Database: PostgreSQL
- [x] Cache: Redis
- [x] Message Queue: Kafka
- [x] AI Framework: LangGraph
- [x] Infrastructure: AWS EKS
- [x] CI/CD: GitHub Actions + ArgoCD

### C. 보안 체크리스트

- [x] OWASP Top 10 대응 계획
- [x] 인증/인가 전략 (JWT + Redis)
- [x] 데이터 암호화 계획
- [x] 크롤링 보안 정책
- [ ] GDPR 상세 컴플라이언스 ← 보강 필요
- [ ] 보안 감사 계획 ← 보강 필요

### D. 운영 체크리스트

- [x] 모니터링 아키텍처
- [x] 로깅 전략
- [x] DR 계획
- [x] On-Call 로테이션
- [x] Runbook (기본)
- [ ] 상세 Runbook ← 보강 필요
- [ ] 용량 계획 ← 보강 필요

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|-----|------|----------|
| v1.0 | 2025.11.30 | 초기 피드백 보고서 작성 (5차 반복 검토 완료) |
| v1.1 | 2025.11.30 | 3-2USER_SCENARIO.md 작성 완료 반영, 종합 점수 상향 (80%→88%) |

---

> **Note**: 본 보고서는 전체 문서(1-1 ~ 5-1-9)를 5차에 걸쳐 반복 검토한 결과입니다.
>
> **v1.1 업데이트**: 3-2USER_SCENARIO.md가 작성 완료되어 모든 Critical 이슈가 해결되었습니다. **개발 착수 가능 상태**입니다.
