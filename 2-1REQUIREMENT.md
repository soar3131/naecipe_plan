# 내시피(Naecipe) 2-1 요구사항 정의서 v0.1 (초안)

작성일: 2025.11.24
버전: v0.1
대상: PO/기획, 서버·클라 개발, 데이터, 디자인, QA

---

## 1. 문서 목적 & 범위

### 1.1 목적

* 내시피 Phase 1 MVP가 **무엇을 할 수 있어야 하는지(What)** 를 기능 단위로 정의하여 개발·디자인·데이터·QA가 공통된 범위 인식을 갖도록 한다.
* 상위 기획 문서(PRD, 서비스 기획서)에서 정의한 **핵심 경험 Core Loop**를 구현하기 위한 기준 문서로 사용한다.

> Core Loop (Phase 1):
> 검색 → 레시피 상세 → 조리/사용 → 피드백 입력 → AI 보정 → 보정 레시피를 레시피북에 저장

### 1.2 적용 범위 (Phase 1)

* Web(반응형 웹) 기준으로 설계·개발하며, Android/iOS는 Web 앱을 감싼 React Native 하이브리드 앱으로 제공한다.
* 기능 범위: 서비스 기획서에서 정의한 Phase 1 Must 기능 + 일부 Should 기능.

---

## 2. 용어 정의

* **레시피(Recipe)**: 재료·분량·조리 단계·시간·난이도·태그 등으로 구조화된 요리 정보 단위.
* **원본 레시피(Original Recipe)**: 크롤링·수집·제휴 등을 통해 확보된, 사용자가 수정하기 전 상태의 서비스 내 레시피 자산.
* **보정 레시피(Adjusted Recipe)**: 사용자의 피드백을 기반으로 AI가 생성한, 원본 레시피의 변형 버전.
* **레시피북(Recipe Book)**: 사용자가 저장한 레시피/보정 레시피 묶음.
* **조리 기록(Cooking Record)**: 사용자가 특정 레시피를 실제 조리에 사용했다고 표시한 단위(시작~완료까지 한 번의 조리 행위).

---

## 3. 상위 목표 및 제약

### 3.1 상위 서비스 목표 (요약)

* “검색 → 나에게 맞는 레시피 선택 → 실패 없이 조리 → 내 입맛에 맞게 보정” 루프 완성.
* Phase 1 최상위 KPI: **Core Loop 1회 이상 완주 사용자 비율**.

### 3.2 제약 조건

* Phase 1은 **커뮤니티/피드/유저 레시피 작성 기능 미포함** (검색·상세·레시피북·AI 보정·Q&A에 집중).
* 외부 레시피 소스 크롤링/제휴는 **별도 백오피스·배치 영역**에서 다루며, 본 문서에서는 “레시피 DB가 주어진 상태”를 전제로 정의.

---

## 4. 시스템 개요

### 4.1 주요 도메인

1. 사용자 계정/세션
2. 홈 & 검색
3. 레시피 리스트(검색 결과)
4. 레시피 상세
5. 레시피북(저장/관리)
6. AI 보정(피드백 → 보정 레시피 생성)
7. 요리 Q&A 에이전트
8. 로깅/데이터 수집

각 도메인별로 기능 요구사항을 정의한다.

---

## 5. 기능 요구사항

### 5.1 사용자 계정/세션

#### [REQ-AUTH-01] 회원 식별

* **목적**: 레시피북/보정 레시피/로그 데이터를 사용자 단위로 관리.

* **요구사항**

  1. 각 사용자는 고유한 `user_id`를 가진다 (내부 식별자, 외부 노출 X).
  2. 로그인 방식(이메일/소셜 등)은 별도 정책에서 정의하되, Phase 1 기준 **최소 1종 이상의 계정 체계**가 있어야 한다.
  3. 비로그인 사용자는 “게스트 유저”로 처리 가능하되, Core Loop(보정 레시피 저장) 수행을 위해 **레시피북 저장 시 계정 생성 플로우로 유도**한다.

* **입력/출력**

  * 입력: 로그인/회원가입 정보 (이메일, 소셜 토큰 등) – 세부는 별도 명세.
  * 출력: `user_id`, 인증 토큰.

---

### 5.2 홈 & 검색

#### [REQ-SEARCH-01] 검색어 입력 & 검색 수행 (Must)

* **설명**: 사용자가 메뉴명/재료/상황 키워드로 레시피를 검색할 수 있어야 한다.

* **요구사항**

  1. 검색 입력 필드에서 최소 2자 이상 입력 시 검색 가능.
  2. 검색 키워드 유형:

     * 메뉴명 예: “김치찌개”
     * 재료명 예: “닭가슴살”
     * 상황 키워드 예: “아이 반찬”, “다이어트”, “술안주”
  3. 검색 실행 시, 레시피 리스트 화면으로 이동하고 결과를 표시한다.

* **입력/출력**

  * 입력: `query_string`, 선택 필터(시간, 난이도 등).
  * 출력: 검색 결과 리스트(레시피 카드 배열), 결과 수.

#### [REQ-SEARCH-02] 검색어 저장 및 프라이버시 (Must)

* **요구사항**

  1. 검색어는 **사용자 식별 정보와 분리하여 암호화/비식별화된 형태로 저장**한다.
  2. 저장 목적: 개인화 추천, 통계 분석.
  3. 원문 검색어를 그대로 노출하는 영역(최근 검색어 등)에는 해당 사용자의 데이터만 보여야 한다.

#### [REQ-SEARCH-03] 최근 검색어/최근 본 레시피 (Should)

* **요구사항**

  1. 홈 화면 상단에 최근 검색어 리스트(최대 N개, 예: 5개)를 노출한다.
  2. 최근 본 레시피(레시피 상세 진입 기준 최근 N개)를 노출할 수 있는 영역을 제공한다.
  3. 사용자가 원하면 최근 검색어를 개별 삭제/전체 삭제 할 수 있어야 한다.

---

### 5.3 레시피 리스트 (검색 결과)

#### [REQ-LIST-01] 레시피 리스트 기본 구조 (Must)

* **설명**: 검색 결과는 통합 리스트 형태로 제공.
* **요구사항**

  1. 한 화면에 여러 출처(셰프/인플루언서/블로그/유저 등)의 레시피를 통합해 보여준다.
  2. 각 레시피 카드에 최소 정보 표시:

     * 썸네일
     * 제목
     * 출처 타입/채널명
     * 예상 조리 시간
     * 난이도
     * 핵심 태그 2~3개(예: “매콤한”, “아이도 좋아하는”)
     * 신뢰도/인기도 스코어(간략 표기: 점수 또는 레벨)

#### [REQ-LIST-02] 정렬 옵션 (Must)

* **요구사항**

  1. 기본 정렬: **종합 스코어 순**.
  2. 추가 정렬: 최신 순, 조리 시간 순(짧은 순), 난이도 순.
  3. 정렬 변경 시 서버 재호출 또는 클라이언트 정렬 정책은 성능 고려 후 결정.

#### [REQ-LIST-03] 태그 기반 필터 (Must / UI는 Should)

* **요구사항**

  1. 최소 필터 항목:

     * 조리 시간(예: 15분 이내 / 30분 이내 / 1시간 이상)
     * 난이도(초급/중급/상급)
  2. Phase 1에서 **맛/대상 태그 필터**는 가능하면 포함 (Should)

     * 예: “아이도 좋아하는”, “매운맛 강함/약함”, “다이어트용”
  3. 필터 조합 시 AND 조건(모든 조건을 만족하는 레시피)으로 동작.

---

### 5.4 레시피 상세

#### [REQ-DETAIL-01] 레시피 기본 정보 표시 (Must)

* **요구사항**

  1. 필수 표시 항목:

     * 레시피 제목
     * 출처 타입/채널명/원본 링크
     * 썸네일/대표 이미지
     * 예상 조리 시간
     * 난이도
     * 인분 수(기준 인분)
  2. 재료 섹션

     * 재료명, 양, 단위(예: “대파 1대”, “간장 2큰술”)
  3. 조리 단계 섹션

     * 단계 번호, 단계별 설명 텍스트
     * 선택: 단계별 이미지/영상 URL (Phase 1에서는 텍스트 필수, 미디어 선택)
  4. 태그 리스트

     * 맛, 대상, 스타일, 재료/조리법 태그 등.

#### [REQ-DETAIL-02] 스코어 표시 (Must)

* **요구사항**

  1. 종합 스코어(0~100 또는 1~5 레벨 등)를 한 줄로 요약 표시.
  2. 상세 스코어 컴포넌트:

     * SNS 지표 요약(조회수/좋아요 등)
     * 방송/언론 노출 유무
     * 내시피 내부 지표(저장 수, 보정 횟수 등) – 데이터 확보 시 단계적 노출.

#### [REQ-DETAIL-03] 레시피 사용 표시 (Must)

* **목적**: 조리 기록을 트래킹하고 Core Loop 진입 시점을 만든다.
* **요구사항**

  1. 레시피 상세 화면에 “이 레시피로 요리 시작” 버튼 제공.
  2. 요리 완료 후, 사용자에게 “조리 완료/피드백 입력” 단계로 유도.
  3. “조리 예정”과 “조리 완료” 구분 여부는 UX에 따라 결정하되, 최소한 “조리 완료” 이벤트는 반드시 수집되어야 한다.

---

### 5.5 레시피북 기능

#### [REQ-BOOK-01] 레시피 저장 (Must)

* **요구사항**

  1. 사용자는 레시피 상세 화면에서 “레시피북에 저장” 버튼을 눌러 해당 레시피를 저장할 수 있다.
  2. 저장 시 메타 정보:

     * `user_id`
     * `recipe_id` (원본)
     * 저장 시점
     * 저장 타입(원본/보정/둘 다)
  3. 비로그인 사용자의 경우, 저장 시점에 로그인/회원가입 플로우로 전환(정책에 따라).

#### [REQ-BOOK-02] 레시피북 목록 조회 (Must)

* **요구사항**

  1. 사용자 레시피북 화면에서 저장된 레시피 목록을 조회할 수 있다.
  2. 기본 정렬: 저장일 최신 순.
  3. 각 항목에는 다음 정보 표시:

     * 썸네일
     * 제목
     * (보정 레시피 포함 시) “보정 버전 존재” 뱃지.

#### [REQ-BOOK-03] 폴더/카테고리 (Should)

* **요구사항**

  1. 최소 1단계 폴더 구조 제공 (예: “평일 저녁”, “손님 초대”).
  2. Phase 1에서 폴더 기능 구현이 어려울 경우, 태그/간단 라벨 방식으로 대체 가능(추가 논의 필요).

---

### 5.6 AI 보정(레시피 튜닝)

#### [REQ-ADJ-01] 피드백 입력 (Must)

* **설명**: 사용자가 요리 후 보정을 위한 피드백을 입력한다.
* **요구사항**

  1. 최소 입력 항목(선택형 + 선택적 코멘트):

     * 간: 짰다 / 적당하다 / 싱겁다
     * 맛/풍미: 강하다 / 적당하다 / 약하다
     * 매운맛: 너무 맵다 / 적당하다 / 덜 맵다 / 거의 안 맵다
     * 난이도: 어려움 / 보통 / 쉬움
  2. 추가 자유 텍스트 코멘트(선택).
  3. 피드백 입력은 레시피 상세의 하단 영역 또는 “조리 완료” 플로우에서 노출.
  4. 피드백 입력 시, 해당 레시피의 특성과 사용자의 평가값을 기반으로 **사용자 취향 프로파일(User Taste Profile)** 을 업데이트하며, 이는 추후 레시피 추천·랭킹 및 사업모델(개인화된 제안 등)에 활용할 수 있도록 구조화·저장한다.

> 단, 취향 프로파일은 개인정보와 분리된 형태로 저장하며, 이용약관/개인정보 처리방침 및 관련 법령을 준수하는 범위 내에서만 활용한다.

#### [REQ-ADJ-02] 보정 레시피 생성 (Must)

* **요구사항**

  1. 피드백 제출 시, 서버는 요리 특화 에이전트에 다음 정보를 전달:

     * 원본 레시피 텍스트(재료/양/조리 단계)
     * 사용자 피드백 값
     * (가능하다면) 사용자 취향 프로파일 요약
  2. 에이전트는 다음을 포함한 **보정 레시피**를 반환:

     * 변경된 재료 양/비율
     * 변경된 조리 시간(필요 시)
     * 변경된 단계(최소화, Phase 1에서는 가능하면 재료·시간 중심)
  3. 보정 레시피는 별도 ID로 저장되며, 원본 레시피와 관계를 유지한다.

#### [REQ-ADJ-03] 보정 레시피 저장 및 표기 (Must)

* **요구사항**

  1. 보정 레시피 생성 후, 사용자에게 “보정 레시피를 레시피북에 저장” 여부를 선택하게 한다.
  2. 저장 시 구조:

     * 원본 레시피 ID
     * 보정 레시피 ID
     * 보정 생성 일시
     * 보정 유형(간/매운맛/양/시간 등)
  3. 레시피북에서 해당 묶음을 조회할 수 있어야 하며, 원본/보정 구분이 명확히 표시되어야 한다.

#### [REQ-ADJ-04] 원본 vs 보정 비교 (Should)

* **요구사항**

  1. 테이블 또는 하이라이트 방식으로, 원본과 보정 레시피의 차이점(재료 양/시간)을 한눈에 비교.
  2. Phase 1에서는 최소한 텍스트 레벨 비교(변경된 항목에 색 강조 등) 구현.

---

### 5.7 요리 Q&A 에이전트

#### [REQ-QNA-01] Q&A 입력 및 응답 (Must)

* **설명**: 레시피 상세 화면에서 재료 대체/보관법/도구 등 질문 가능.
* **요구사항**

  1. 레시피 상세 화면 내 Q&A 입력 필드 제공.
  2. 최소 카테고리:

     * 재료 대체
     * 재료/요리 보관
     * 도구 사용법
  3. 질문 전송 시, 모델 입력에 다음 정보 포함:

     * 레시피 ID 및 요약 정보
     * 사용자 질문 텍스트
  4. 응답은 1~3개의 단락으로 요약된 텍스트로 반환.
  5. 위험 식재료·보관 문제 등 안전 관련 내용은 **보수적 가이드**를 포함해야 한다.

#### [REQ-QNA-02] 호출 제한 (Must)

* **요구사항**

  1. 사용자별/세션별 Q&A 호출 횟수 제한(예: 일일 N회) 정책 정의.
  2. 제한 초과 시, 안내 메시지 노출.

#### [REQ-QNA-03] 지식 소스 구성 및 활용 (Should)

* **설명**: Q&A 답변 품질을 높이기 위해, 신뢰도 높은 전문 요리 지식을 에이전트의 지식 소스로 활용한다.
* **요구사항**

  1. 에이전트는 다음과 같은 도메인 문서를 지식 소스로 활용할 수 있는 구조여야 한다.

     * 라이선스를 확보한 유명 요리책/레시피 북의 PDF·텍스트
     * 조리 과학, 식품 위생, 보관 관련 공식 가이드 문서 등
  2. 구현 시, 위 문서들을 인덱싱한 후 사용자의 질문과 레시피 문맥에 맞는 관련 문서를 검색하여 모델에 함께 전달하는 **검색 결합형 구조(예: RAG)** 를 우선 고려한다. 단, 이는 구현 가이드 수준이며, 구체적인 기술 스택과 아키텍처는 상세 설계 단계에서 확정한다.
  3. 모든 외부 문서 활용은 저작권·라이선스를 준수하는 범위 내에서 이루어져야 하며, 필요 시 요약·가공된 형태로 저장·노출한다.

---

### 5.8 로깅 & 데이터 요구사항 (요약)

> 상세 이벤트 스키마는 데이터 팀과 별도 데이터 설계 문서에서 확장. 여기서는 **반드시 수집해야 하는 이벤트**만 정의.

#### [REQ-LOG-01] 공통 프로퍼티 (Must)

* 모든 이벤트 공통:

  * `user_id`(게스트 포함, 익명/해시), `session_id`, `timestamp`, `platform`, `app_version`.

#### [REQ-LOG-02] 핵심 이벤트 (Must)

1. `search_performed`

   * 속성: query, 필터, 결과 수.
2. `recipe_list_viewed`

   * 속성: 정렬 옵션, 필터 상태.
3. `recipe_detail_viewed`

   * 속성: recipe_id, source_type.
4. `cooking_started`

   * 속성: recipe_id, 예상 인분.
5. `cooking_completed`

   * 속성: 실제 조리 시간(선택), 난이도 평가.
6. `feedback_submitted`

   * 속성: 간/맛/매운맛/난이도 값, 자유 코멘트 여부.
7. `ai_adjustment_created`

   * 속성: original_recipe_id, adjusted_recipe_id, 보정 타입.
8. `recipe_saved`

   * 속성: recipe_id, type(원본/보정), 폴더/카테고리.
9. `adjusted_recipe_used`

   * 속성: adjusted_recipe_id, 사용 회차.
10. `qa_asked`

    * 속성: question_category, recipe_id 여부.

---

## 6. 비기능 요구사항 (요약)

### 6.1 성능

* 검색 응답 p95 ≤ 2초.
* 레시피 상세 로딩 p95 ≤ 1.5초.

### 6.2 안정성

* 검색/상세/저장/보정 관련 핵심 API 성공률 ≥ 99%.

### 6.3 보안/프라이버시

* 검색어 및 행동 로그는 **암호화·비식별화 저장**, 식별 정보와 분리.
* 계정/인증, 개인정보 관련 정책은 별도 **서비스 정책서**에서 정의.

---

## 7. 오픈 이슈(추가 정의 필요 항목)

1. **로그인/회원가입 방식 구체화**

   * 이메일 vs 소셜 vs 애플/구글 연동 조합.
2. **레시피북 폴더 구조 수준**

   * Phase 1에서 폴더/라벨 중 무엇을 택할지.
3. **AI 보정 안전 가이드 라인**

   * 염도/매운맛 보정의 상한/하한, 알레르기 관련 경고 메시지 등.
4. **Q&A 호출 한도**

   * 유료/무료 모델 고려 시 정책 구분 필요.
5. **개인화 추천(홈 노출)**의 P1 범위

   * “최근 본/저장 기반” 단순 추천 vs full personalization.

---

(끝)
